CELERY COMMANDS FOR STUCKAI FOR TRAVEL
=====================================

PREREQUISITES:
- Virtual environment activated: source venv/bin/activate
- Redis running: sudo systemctl start redis-server
- RabbitMQ running: sudo systemctl start rabbitmq-server

BASIC COMMANDS:
==============

1. Start Celery Worker (Development):
   celery -A app.tasks.celery_worker worker --loglevel=info

2. Start Celery Worker (Production):
   celery -A app.tasks.celery_worker worker --loglevel=info --concurrency=4

3. Start Celery Beat Scheduler:
   celery -A app.tasks.celery_worker beat -S app.scheduler.DatabaseScheduler --loglevel=info

4. Start Celery Beat with Auto-restart (Development):
   watchmedo auto-restart -d . -p '*.py' -R -- celery -A app.tasks.celery_worker beat -S app.scheduler.DatabaseScheduler --loglevel=INFO

ADVANCED COMMANDS:
=================

5. Start Worker with specific queue:
   celery -A app.tasks.celery_worker worker --loglevel=info -Q default

6. Start Worker with multiple queues:
   celery -A app.tasks.celery_worker worker --loglevel=info -Q default,high_priority

7. Start Worker with custom hostname:
   celery -A app.tasks.celery_worker worker --loglevel=info --hostname=worker1@%h

8. Monitor Celery tasks:
   celery -A app.tasks.celery_worker flower

9. Check Celery status:
   celery -A app.tasks.celery_worker inspect active

10. Purge all queues:
    celery -A app.tasks.celery_worker purge

USAGE EXAMPLES:
==============

# Terminal 1: Start Worker
celery -A app.tasks.celery_worker worker --loglevel=info

# Terminal 2: Start Beat Scheduler
celery -A app.tasks.celery_worker beat -S app.scheduler.DatabaseScheduler --loglevel=info

# Terminal 3: Start FastAPI (if not already running)
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000

TROUBLESHOOTING:
===============

- If Redis connection fails: sudo systemctl restart redis-server
- If RabbitMQ connection fails: sudo systemctl restart rabbitmq-server
- If tasks don't execute: Check if worker is running and connected
- If scheduler doesn't work: Check if beat is running and database is accessible

QUICK START SCRIPT:
==================

Use the interactive script: ./start_celery.sh 